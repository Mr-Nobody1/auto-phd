<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PhDApply | Advanced Academic Intelligence</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;800&family=Manrope:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="/public/styles.css">
  
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="dark-theme">
  <!-- Noise Overlay -->
  <div class="noise"></div>
  <!-- Ambient Gradient Background -->
  <div class="ambient-gradient"></div>

  <div class="app-layout">
    
    <header class="masthead">
      <div class="brand">
        <span class="brand-icon">⌘</span>
        <h1 class="brand-name">PhDApply</h1>
      </div>
      <div class="brand-subtitle">Neuro-Augmented Application Synthesizer</div>
    </header>

    <main class="main-content">
      
      <!-- STEP 1: FORM SECTION -->
      <section id="form-section" class="glass-panel active-section">
        <div class="panel-header">
          <h2 class="panel-title">Initialize Synthesis</h2>
          <p class="panel-desc">Configure applicant and positional vectors.</p>
        </div>

        <form id="application-form" class="application-form">
          
          <div class="form-grid">
            <!-- Left Column: Core Identity -->
            <div class="form-column">
              <h3 class="column-label">Positional Vectors</h3>
              
              <div class="input-wrapper">
                <input type="text" id="professorName" name="professorName" required placeholder=" ">
                <label for="professorName">Target Principal Investigator *</label>
              </div>

              <div class="input-wrapper">
                <input type="text" id="university" name="university" required placeholder=" ">
                <label for="university">Institution Sandbox *</label>
              </div>

              <div class="input-row">
                <div class="select-wrapper">
                  <select id="language" name="language" required>
                    <option value="english">English (Default)</option>
                    <option value="german">Deutsch</option>
                    <option value="french">Français</option>
                    <option value="other">Custom Syntax</option>
                  </select>
                  <label for="language">Primary Language *</label>
                </div>

                <div class="input-wrapper" id="customLanguageGroup" style="display: none;">
                  <input type="text" id="customLanguage" name="customLanguage" placeholder=" ">
                  <label for="customLanguage">Specify Syntax</label>
                </div>
              </div>

              <div class="input-row">
                <div class="select-wrapper">
                  <select id="fundingStatus" name="fundingStatus" required>
                    <option value="fully_funded">Fully Funded</option>
                    <option value="partially_funded">Partially Funded</option>
                    <option value="self_funded">Self Funded / Independent</option>
                    <option value="seeking_funding">Requires Funding</option>
                  </select>
                  <label for="fundingStatus">Financial Status *</label>
                </div>

                <div class="select-wrapper">
                  <select id="preferredStart" name="preferredStart">
                    <option value="Fall 2026">Autumn 2026</option>
                    <option value="Spring 2026">Spring 2026</option>
                    <option value="Fall 2027">Autumn 2027</option>
                    <option value="As soon as possible">Immediate</option>
                  </select>
                  <label for="preferredStart">Epoch Horizon</label>
                </div>
              </div>
            </div>

            <!-- Right Column: Context & Data -->
            <div class="form-column">
              <h3 class="column-label">Context Matters</h3>

              <div class="textarea-wrapper">
                <textarea id="researchInterests" name="researchInterests" rows="3" placeholder=" "></textarea>
                <label for="researchInterests">Research Topology</label>
              </div>

              <div class="textarea-wrapper">
                <textarea id="postingContent" name="postingContent" rows="4" placeholder=" "></textarea>
                <label for="postingContent">Raw Call for Papers/Job Description</label>
              </div>

              <div class="textarea-wrapper">
                <textarea id="additionalNotes" name="additionalNotes" rows="2" placeholder=" "></textarea>
                <label for="additionalNotes">Anomalous Data (Notes)</label>
              </div>
            </div>
          </div>

          <div class="data-ingestion-zone">
            
            <div class="upload-component" id="cvUpload">
              <input type="file" id="cvFile" name="cvFile" accept=".pdf" required>
              <div class="upload-content">
                <svg class="upload-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                <span class="upload-text" id="cvFileName">Ingest Curriculum Vitae (PDF) *</span>
              </div>
            </div>

            <div class="upload-component optional" id="contextImageUpload">
              <input type="file" id="contextImage" name="contextImage" accept="image/*">
              <div class="upload-content">
                <svg class="upload-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                <span class="upload-text" id="contextImageFileName">Ingest Visual Context (Image)</span>
              </div>
            </div>

          </div>

          <div class="action-footer">
            <button type="submit" class="cyber-btn" id="submitBtn">
              <span class="btn-text">Execute Synthesis Sequence</span>
              <span class="btn-glitch"></span>
            </button>
          </div>

        </form>
      </section>

      <!-- STEP 2: PROGRESS SECTION -->
      <section id="progress-section" class="glass-panel" style="display: none;">
        <div class="panel-header progress-header">
          <h2 class="panel-title pulse-text">Synthesis Active</h2>
          <div class="cyber-timer" id="time-elapsed">0:00</div>
        </div>

        <div class="progress-layout">
          
          <div class="active-agent-display">
            <div class="display-label">Current Processor</div>
            <div class="display-value" id="current-agent-name">BOOTING...</div>
            <div class="display-status" id="current-agent-action">Establishing neural link</div>
            <div class="scanline"></div>
          </div>

          <div class="agent-list-container">
            <h3 class="column-label">Pipeline Topology</h3>
            <div class="agent-list strict-list" id="agent-list">
              <!-- Agents dynamically inserted here by app.js -->
            </div>
          </div>

        </div>
      </section>

      <!-- STEP 3: RESULTS SECTION -->
      <section id="results-section" class="glass-panel results-panel" style="display: none;">
        <div class="panel-header flex-header">
          <div>
            <h2 class="panel-title highlight-text">Synthesis Complete</h2>
            <p class="panel-desc">All artifacts successfully generated and parsed.</p>
          </div>
          <button class="cyber-btn sm-btn outline-btn" id="startNewBtn" onclick="startNew()">
            <span class="btn-text">Reset Terminal</span>
          </button>
        </div>

        <div class="results-matrix">
          
          <div class="tabs-rail">
            <button class="tab active" data-tab="email">
              <span class="tab-icon">►</span> Comms Protocol
            </button>
            <button class="tab" data-tab="cv">
              <span class="tab-icon">►</span> CV Enhancements
            </button>
            <button class="tab" data-tab="motivation">
              <span class="tab-icon">►</span> Motivation Vector
            </button>
            <button class="tab" data-tab="proposal">
              <span class="tab-icon">►</span> Research Proposal
            </button>
          </div>

          <div class="tab-viewport">
            
            <!-- Email -->
            <div class="tab-pane active" id="tab-email">
              <div class="data-block">
                <div class="block-header">
                  <h3>Heuristic Subject Lines</h3>
                </div>
                <div class="subject-lines glow-list" id="subject-lines"></div>
              </div>

              <div class="data-block major-block">
                <div class="block-header flex-header">
                  <h3>Payload Body</h3>
                  <button class="util-btn" onclick="copyToClipboard('email-body')">COPY_DATA</button>
                </div>
                <div class="block-content code-style" id="email-body"></div>
                <div class="block-footer">
                  <span class="metric" id="email-word-count"></span>
                  <span class="metric" id="email-paper-ref"></span>
                </div>
              </div>
            </div>

            <!-- CV -->
            <div class="tab-pane" id="tab-cv">
              <div class="data-block">
                <div class="block-header">
                  <h3>Critical Alterations</h3>
                </div>
                <div class="cv-updates" id="cv-updates"></div>
              </div>

              <div class="data-block">
                <div class="block-header">
                  <h3>Preserved Topology</h3>
                </div>
                <div class="cv-keeps" id="cv-keeps"></div>
              </div>
            </div>

            <!-- Motivation -->
            <div class="tab-pane" id="tab-motivation">
              <div class="data-block major-block">
                <div class="block-header flex-header">
                  <h3>Motivation Matrix</h3>
                  <button class="util-btn" onclick="copyToClipboard('motivation-letter')">COPY_DATA</button>
                </div>
                <div class="block-content document-style" id="motivation-letter"></div>
                <div class="block-footer">
                  <span class="metric" id="motivation-word-count"></span>
                </div>
              </div>
            </div>

            <!-- Proposal -->
            <div class="tab-pane" id="tab-proposal">
              <div class="data-block major-block">
                <div class="block-header flex-header">
                  <h3 id="proposal-title">Research Proposal</h3>
                  <button class="util-btn" onclick="copyToClipboard('research-proposal')">COPY_DATA</button>
                </div>
                <div class="block-content document-style" id="research-proposal"></div>
                <div class="block-footer">
                  <span class="metric" id="proposal-word-count"></span>
                </div>
              </div>
            </div>

          </div>

        </div>
      </section>

    </main>

  </div>

  <script src="/public/app.js"></script>
</body>
</html>
